---
layout: post
title: Communication
description: null
image: null
---

- 直接蓝图通信
    1. 关卡中存在两个Actor，需要进行通信(本质是获取对象引用)，如关卡中与一开关互动后打开特定门或灯(每个均为单独蓝图)
    >两对象蓝图中互有一个变量为对方类型，该变量勾选实例可编辑，然后即可在蓝图实例中的对应位置中找到该变量，下拉选择合适Actor即可

- 事件调度器
    - 适用于告知其他“正在倾听”的蓝图已发生事件，倾听的蓝图便会作出反应，并相互独立的执行预期操作，如在游戏中有一BOSS，它被消灭时会调用“OnDied”事件调度器，则在其他蓝图中可绑定任意事件到该调度器上，如角色作出庆祝动作，关卡中的门会打开，HUD...
    1. 从角色蓝图到关卡蓝图通信
        1. 玩家角色升级，需开放锁定区域
        2. 玩家角色按下行动按钮，对关卡执行某种操作
    2. 生成的Actor执行某种操作时触发事件
        1. 生成一个BOSS,BOSS被消灭时触发事件，在场景生成奖励
        2. 在关卡中生成一个道具(武器，回复药剂...)并在道具被拾取时告知相关方作出对应反应
    
- 蓝图接口
    - 通过接口可实现与多种类型对象(均共享特定功能)形成互动的一般方法。如汽车和树是完全不同的两种对象，但有一个共同点，都可被武器开火击中并破坏，创建一个包含OnTakeWeapon函数的蓝图接口，让汽车和树应用此接口后即可将二者视为相同的对象，在任意被击中时调用OnTakeWeapon,并使它们出现不同反应
    1. 数个蓝图中存在一些相似的功能，但在调用后出现不同效果
        1. 玩家拥有一个火焰喷射器，使用时将触发ElementalDamage函数，树木蓝图受ElementalDamage调用将将树木烧毁，而雪人融化
    2. 玩家拥有一个“USE”按钮，按下可开门，关灯，捡起道具等操作
    3. 敌人拥有特殊能力，可基于玩家的体力值完成变化，执行不同操作

- Cast to
    - 使用Cast to时，便是在询问对象“你是否为该对象的特殊版本”，如果是，则进行访问，否则忽略，如果创建了一个名为“FlyingCharactor”的特殊角色蓝图，此蓝图可使玩家角色在游戏中飞行，则可使用Get Player Charactor节点访问玩家角色的移动组件并在通过常规方法对玩家产生影响，如设置位置，旋转等，您无法获得飞行能力，因为Charactor蓝图不了解飞行，只有“FlyingCharactor”蓝图了解飞行，在此例中，需要获取玩家角色并Cast to Flying...后，才可访问Flying函数
        1. 需要访问另一个蓝图版本
            1. 角色走到火焰中，导致体力值被耗尽(投射到那个蓝图，以便访问并变更体力值)
            2. 角色死亡，需要重新生成(投射到特殊的游戏模式蓝图，执行重新生成脚本)
        2. 需要访问相同类的多个蓝图，并以相同方法进行修改
            1. 场景中有多个灯，事件发生时需要将他们开启或关闭(投射到灯蓝图并执行函数将灯关闭)
        3. 需要访问一个特殊的子蓝图
            1. 存在基于一个功能蓝图(猫，狗，鸟)的多个蓝图，需要访问其中一个动物(投射到猫狗鸟，访问其相应的蓝图和特有功能)